{"version":3,"sources":["../../../js/tabs/DynamicTabSheet.jsx"],"names":["DynamicTabSheet","props","componentDidMount","bind","getObjectTypes","state","tabs","tabContent","allSchemas","db","PouchDB","SCHEMA_DB","setState","query","SCHEMA_ALL_VIEW","err","res","console","error","tbs","content","rows","map","obj","key","schema","debug","JSON","stringify","push","title","relationshipSchema","diagramSchema","log","templateSchema","React","Component"],"mappings":"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","file":"DynamicTabSheet.js","sourcesContent":["class DynamicTabSheet extends React.Component{\n    constructor(props) {\n        super(props);\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.getObjectTypes = this.getObjectTypes.bind(this);\n\n        //tabs the HTML for the tabs, and tabContent the HTML for the tab bodies\n        this.state = {\n            tabs: [],\n            tabContent: []\n        };\n\n        this.allSchemas = [];\n    }\n\n\n    componentDidMount(){\n        this.getObjectTypes();\n    }\n\n    render(){\n        return <div id=\"tabs\">\n            <ul className=\"nav nav-tabs\" role=\"tablist\">\n                {this.state.tabs}\n            </ul>\n\n            <div className=\"tab-content\">\n                {this.state.tabContent}\n            </div>\n        </div>\n    }\n\n    /**\n     * Get the objects types from the DB, assign the names and the IDs to some elements by updating the state.\n     */\n    getObjectTypes(){\n        let db = new PouchDB(SCHEMA_DB);\n\n        this.setState({\n            tabs:[],\n            tabContent:[]\n        });\n\n        //Get all the object types that the user has configured and create a tab for each one.\n        db.query(SCHEMA_ALL_VIEW, function(err, res){\n            if(err){\n                console.error(err);\n            }\n            else{\n                let tbs = [];\n                let content = [];\n\n                this.allSchemas = res.rows.map(function(obj){\n                    return obj.key;\n                });\n\n                //Loop each of the Schema objects returned from the Schema DB query\n                res.rows.map(function(schema){\n                    console.debug(\"Creating Sheet for \"+JSON.stringify(schema));\n\n                    //Add a tab\n                    tbs = this.state.tabs;\n                    tbs.push(<li key={schema.key.title} role=\"presentation\"><a href={\"#\"+schema.key.title} aria-controls=\"diagrams\" role=\"tab\" data-toggle=\"tab\">{schema.key.title}</a></li>);\n\n                    //add tab content, use the lister component to update\n                    content = this.state.tabContent;\n                    content.push(<div key={schema.key.title} role=\"tabpanel\" className=\"tab-pane\" id={schema.key.title}>\n                        <GenericLister allSchemas={this.allSchemas} schema={schema.key} id={schema.key.title} next={this.getObjectTypes}/>\n                    </div>);\n\n                }.bind(this));\n\n\n                /** Objects **/\n                tbs.push(<li key=\"schema\" role=\"presentation\"><a href={\"#schema\"} aria-controls=\"diagrams\" role=\"tab\" data-toggle=\"tab\">Objects</a></li>);\n\n                content.push(<div key={\"schema\"} role=\"tabpanel\" className=\"tab-pane\" id=\"schema\">\n                    <SchemaLister next={this.getObjectTypes} />\n                    <NewSchemaForm next={this.getObjectTypes}/>\n                </div>);\n\n                //Add tabs and tab content for diagrams and relationships\n                tbs.push(<li key=\"relationships\" role=\"presentation\"><a href={\"#\"+relationshipSchema.title} aria-controls=\"diagrams\" role=\"tab\" data-toggle=\"tab\">Relationships</a></li>);\n                content.push(<div key={relationshipSchema.title} role=\"tabpanel\" className=\"tab-pane\" id={relationshipSchema.title}>\n                    <GenericLister allSchemas={this.allSchemas} schema={relationshipSchema} id={relationshipSchema.title} next={this.getObjectTypes}/>\n                </div>);\n\n                tbs.push(<li key=\"diagrams\" role=\"presentation\"><a href={\"#\"+diagramSchema.title} aria-controls=\"diagrams\" role=\"tab\" data-toggle=\"tab\">Diagrams</a></li>);\n                content.push(<div key={diagramSchema.title} role=\"tabpanel\" className=\"tab-pane\" id={diagramSchema.title}>\n                    <GenericLister allSchemas={this.allSchemas} schema={diagramSchema} id={diagramSchema.title} next={this.getObjectTypes}/>\n                </div>);\n\n\n                console.log(\"Adding Templates\");\n                tbs.push(<li key=\"templates\" role=\"presentation\"><a href={\"#\"+templateSchema.title} aria-controls=\"diagrams\" role=\"tab\" data-toggle=\"tab\">Templates</a></li>);\n                content.push(<div key={templateSchema.title} role=\"tabpanel\" className=\"tab-pane\" id={templateSchema.title}>\n                    <GenericLister allSchemas={this.allSchemas} schema={templateSchema} id={templateSchema.title} next={this.getObjectTypes}/>\n                </div>);\n\n\n                /**tbs.push(<li key=\"diagrams\" role=\"presentation\"><a href={\"#diagrams\"} aria-controls=\"diagrams\" role=\"tab\" data-toggle=\"tab\">Diagrams</a></li>);\n                content.push(<div key=\"diagrams\" role=\"tabpanel\" className=\"tab-pane\" id=\"diagrams\"><DiagramLister/></div>);**/\n\n                this.setState({\n                    tabs:tbs,\n                    tabContent: content\n                });\n            }\n        }.bind(this))\n    }\n}"]}