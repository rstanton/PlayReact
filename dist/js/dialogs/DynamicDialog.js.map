{"version":3,"sources":["../../../js/dialogs/DynamicDialog.jsx"],"names":["DynamicDialog","props","handleSubmit","bind","handleChange","object","id","title","schema","event","field","$","target","data","value","db","PouchDB","OBJECT_DB","console","log","JSON","stringify","post","err","res","error","dialog","next","Dialog"],"mappings":";;;;;;;;;;AAAA;;;IAGMA,a;;;AACF,2BAAYC,KAAZ,EAAkB;AAAA;;AAAA,kIACRA,KADQ;;AAGd,cAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AACA,cAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,OAApB;;AAEA,cAAKE,MAAL,GAAc,EAAd;;AANc;AAQjB;;;;iCAEO;AACJ,mBAAO;AAAA;AAAA,kBAAK,IAAI,KAAKJ,KAAL,CAAWK,EAApB,EAAwB,OAAO,KAAKL,KAAL,CAAWM,KAA1C;AACH;AAAA;AAAA;AACI;AAAA;AAAA,0BAAM,QAAO,GAAb,EAAiB,UAAU,KAAKL,YAAhC;AACI;AAAA;AAAA,8BAAK,WAAU,YAAf;AACI,gDAAC,iBAAD,IAAmB,UAAU,KAAKE,YAAlC,EAAgD,QAAQ,KAAKH,KAAL,CAAWO,MAAnE;AADJ,yBADJ;AAII;AAAA;AAAA,8BAAQ,MAAK,QAAb,EAAsB,WAAU,iBAAhC;AAAA;AAAA;AAJJ;AADJ;AADG,aAAP;AAUH;;;qCAEYC,K,EAAM;AACf,gBAAMC,QAAQ,CAACC,EAAE,MAAIF,MAAMG,MAAN,CAAaN,EAAnB,EAAuBO,IAAvB,CAA4B,OAA5B,CAAD,CAAd;AACA,iBAAKR,MAAL,CAAYK,KAAZ,IAAoBD,MAAMG,MAAN,CAAaE,KAAjC;AACH;;AAGD;;;;qCACaL,K,EAAM;AACf,gBAAIM,KAAK,IAAIC,OAAJ,CAAYC,SAAZ,CAAT;;AAEA,iBAAKZ,MAAL,CAAYE,KAAZ,GAAoB,KAAKN,KAAL,CAAWO,MAAX,CAAkBD,KAAtC;;AAEAW,oBAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAe,KAAKhB,MAApB,CAAZ;;AAEAU,eAAGO,IAAH,CAAQ,KAAKjB,MAAb,EAAqB,UAASkB,GAAT,EAAcC,GAAd,EAAkB;AACnC,oBAAGD,GAAH,EACIL,QAAQO,KAAR,CAAcF,GAAd,EADJ,KAEI;AACAZ,sBAAE,MAAI,KAAKV,KAAL,CAAWK,EAAjB,EAAqBoB,MAArB,CAA4B,OAA5B;;AAEA;AACA,yBAAKzB,KAAL,CAAW0B,IAAX;AACH;AACJ,aAToB,CASnBxB,IATmB,CASd,IATc,CAArB;;AAWA,iBAAKE,MAAL,GAAc,EAAd;AACH;;;;EAlDuBuB,M","file":"DynamicDialog.js","sourcesContent":["/**\n *\n */\nclass DynamicDialog extends Dialog{\n    constructor(props){\n        super(props);\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n\n        this.object = {}\n\n    }\n\n    render(){\n        return <div id={this.props.id} title={this.props.title}>\n            <div>\n                <form action=\"#\" onSubmit={this.handleSubmit}>\n                    <div className=\"form-group\">\n                        <DynamicObjectForm onChange={this.handleChange} schema={this.props.schema}/>\n                    </div>\n                    <button type=\"submit\" className=\"btn btn-primary\">Save</button>\n                </form>\n            </div>\n        </div>;\n    }\n\n    handleChange(event){\n        const field = [$(\"#\"+event.target.id).data(\"title\")];\n        this.object[field]= event.target.value;\n    }\n\n\n    //@ToDo handle database submission...\n    handleSubmit(event){\n        let db = new PouchDB(OBJECT_DB);\n\n        this.object.title = this.props.schema.title;\n\n        console.log(JSON.stringify(this.object));\n\n        db.post(this.object, function(err, res){\n            if(err)\n                console.error(err);\n            else{\n                $(\"#\"+this.props.id).dialog(\"close\");\n\n                //Callback\n                this.props.next();\n            }\n        }.bind(this));\n\n        this.object = {};\n    }\n}"]}